<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>chart.js</title>
  <head>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
  </head>
<body>
<div class="chart-container" style="position: relative; height:200px; width:60vw">
  <canvas id="myChart"></canvas>
</div>
<button type="button" id="addDataSet">데이터셋 추가</button>
<button type="button" id="delDataset">데이터셋 삭제</button>


<script>
  let ctx = document.getElementById('myChart');
  let dataSet1 = {
    label: '유효전력',
    borderColor: '#c0504d',
    backgroundColor: '#c0504d',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [30,40,60,70,20,50,80,10,30,50],
  }
  let dataSet2 = {
    label: '무효전력',
    borderColor: '#4f81bd',
    backgroundColor: '#4f81bd',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [60,70,80,90,40,20,30,10,60,40],
  }
  let dataSet3 = {
    label: 'R상 전압',
    borderColor: '#b44fbd',
    backgroundColor: '#b44fbd',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [10,30,50,60,40],
  }
  let dataSet4 = {
    label: 'S상 전압',
    borderColor: '#4fbd66',
    backgroundColor: '#4fbd66',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [20,40,90,50,60],
  }
  let dataSet5 = {
    label: 'T상 전압',
    borderColor: '#bdbc4f',
    backgroundColor: '#bdbc4f',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [30,70,40,50,60,10],
  }
  let dataSet6 = {
    label: 'R상 전류 ',
    borderColor: '#bd854f',
    backgroundColor: '#bd854f',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [30,40,50,70,40,10,20],
  }
  let dataSet7 = {
    label: 'S상 전류',
    borderColor: '#764fbd',
    backgroundColor: '#764fbd',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [20,40,30,50,90,40,10],
  }
  let dataSet8 = {
    label: 'T상 전류',
    borderColor: '#281fe3',
    backgroundColor: '#281fe3',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [20,80,40,50,60,30],
  }
  let dataSet9 = {
    label: '주파수',
    borderColor: '#1ac9f5',
    backgroundColor: '#1ac9f5',
    pointRadius: 0,
    lineTension: 0,
    fill: false,
    data: [30,40,50,70,80,40],
  }


  let config = {
    type: 'line',
    data: {
      labels: ['00시','01시','02시','03시','04시','05시','06시','07시','08시','09시','10시','11시','12시','13시','14시','15시','16시','17시','18시','19시','20시','21시','22시','23시'],
      datasets: [dataSet1,dataSet2,dataSet3,dataSet4,dataSet5,dataSet6,dataSet7,dataSet8,dataSet9,]
    },
    options: {
      maintainAspectRatio: false,
      legend: {
        position: 'bottom'
      }
    }
  };

  //차트 그리기
  let myChart = new Chart(ctx, config);

  console.log(config.data.datasets)
  //데이터셋 추가
  let gBtns = document.querySelectorAll('.g')
  document.getElementById('addDataSet').onclick = function(){
    let newDataset = dataSet1;

    // chart에 newDataset 푸쉬
    config.data.datasets.push(newDataset);

    myChart.update();	//차트 업데이트
  }

  //데이터셋 삭제
  document.getElementById('delDataset').onclick = function(){
    config.data.datasets.splice(0,1);
    myChart.update();	//차트 업데이트
  }
</script>
</body>